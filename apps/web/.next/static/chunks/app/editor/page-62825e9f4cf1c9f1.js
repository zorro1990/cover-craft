(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[219],{795:function(){},5582:function(){},8657:function(){},3596:function(e,t,r){Promise.resolve().then(r.bind(r,8233))},8233:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return I}});var n=r(7573),l=r(7653),a=r(1104);let s={level:"warn",enableInProduction:!1};function i(e){return s.enableInProduction}function o(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),l=2;l<r;l++)n[l-2]=arguments[l];let a=new Date().toISOString();return["[".concat(a,"] [").concat(e.toUpperCase(),"]"),t,...n]}let c={debug(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];i("debug")&&console.debug(...o("debug",e,...r))},info(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];i("info")&&console.info(...o("info",e,...r))},warn(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];i("warn")&&console.warn(...o("warn",e,...r))},error(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];i("error")&&console.error(...o("error",e,...r))},configure(e){Object.assign(s,e)}},d=[{width:1080,height:1440,label:"3:4",ratio:"3:4"},{width:1080,height:1080,label:"1:1",ratio:"1:1"},{width:1080,height:810,label:"4:3",ratio:"4:3"},{width:1080,height:462,label:"21:9",ratio:"21:9"}],u=["#ffffff","#000000","#f0f0f0","#e0e0e0","#d0d0d0","#c0c0c0"];function h(e,t){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(!e){c.warn("Canvas is not initialized");return}if(!t||"number"!=typeof t.width||"number"!=typeof t.height){c.warn("Invalid canvas size provided to resizeCanvas");return}let n=e.getWidth(),l=e.getHeight();if(e.setDimensions({width:t.width,height:t.height}),r){let r=t.width/n,a=t.height/l;e.getObjects().forEach(e=>{e.scaleX=(e.scaleX||1)*r,e.scaleY=(e.scaleY||1)*a,e.left=(e.left||0)*r,e.top=(e.top||0)*a,e.setCoords()})}e.renderAll()}function x(e,t){if(!e){c.warn("Canvas is not initialized");return}e.setBackgroundColor(t,()=>{e.renderAll()})}function g(e){let{width:t=1080,height:r=1440,backgroundColor:s="#ffffff",onCanvasReady:i}=e,o=(0,l.useRef)(null),d=(0,l.useRef)(null),u=t||1080,h=r||1440,x=s||"#ffffff";return(0,l.useEffect)(()=>{if(o.current)try{let e=new a.fabric.Canvas(o.current,{width:u,height:h,backgroundColor:x,selection:!0});d.current=e,i&&i(e),e.on("mouse:wheel",t=>{let r=t.e.deltaY,n=e.getZoom();n*=.999**r,function(e,t,r){if(!e){c.warn("Canvas is not initialized");return}let n=Math.max(.1,Math.min(5,t));r?e.zoomToPoint(new a.fabric.Point(r.x,r.y),n):e.setZoom(n),e.requestRenderAll()}(e,n,{x:t.e.offsetX,y:t.e.offsetY}),t.e.preventDefault(),t.e.stopPropagation()});let t=!1,r=0,n=0;return e.on("mouse:down",l=>{let a=l.e;(a.spaceKey||1===a.button)&&(t=!0,e.selection=!1,r=a.clientX,n=a.clientY)}),e.on("mouse:move",l=>{if(t){let t=l.e,a=t.clientX-r,s=t.clientY-n;(function(e,t,r){if(!e){c.warn("Canvas is not initialized");return}let n=e.viewportTransform;n&&(n[4]+=t,n[5]+=r,e.requestRenderAll())})(e,a,s),r=t.clientX,n=t.clientY}}),e.on("mouse:up",()=>{t&&(t=!1,e.selection=!0)}),()=>{e.dispose()}}catch(e){c.error("Failed to initialize canvas")}},[i]),(0,l.useEffect)(()=>{let e=e=>{"Space"===e.code&&(e.preventDefault(),e.spaceKey=!0)},t=e=>{"Space"===e.code&&(e.spaceKey=!1)};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}},[]),(0,n.jsx)("div",{className:"flex items-center justify-center w-full h-full bg-gray-100",children:(0,n.jsx)("canvas",{ref:o,width:u,height:h,style:{border:"1px solid #e5e7eb",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}})})}function f(e){let{sizes:t,currentSize:r,onSizeChange:l}=e;return(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"text-sm text-gray-600",children:"尺寸:"}),(0,n.jsx)("div",{className:"flex gap-1",children:t.map(e=>(0,n.jsx)("button",{onClick:()=>l(e),className:"px-3 py-1.5 text-xs rounded border transition-colors ".concat(r.ratio===e.ratio?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"),title:"".concat(e.label," (").concat(e.width,"x").concat(e.height,")"),children:e.label},e.ratio))})]})}function m(e){let{colors:t,currentColor:r,onBackgroundChange:l}=e;return(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"text-sm text-gray-600",children:"背景:"}),(0,n.jsx)("div",{className:"flex gap-1",children:t.map(e=>(0,n.jsx)("button",{onClick:()=>l(e),className:"w-8 h-8 rounded border-2 transition-all ".concat(r===e?"border-blue-600 scale-110":"border-gray-300 hover:border-gray-400"),style:{backgroundColor:e},title:e},e))})]})}function p(e){let{sizes:t,currentSize:r,currentBackground:l,onSizeChange:a,onBackgroundChange:s,onOpenExportDialog:i,onCopy:o}=e;return(0,n.jsxs)("div",{className:"h-14 bg-white border-b border-gray-200 flex items-center justify-between px-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-6",children:[(0,n.jsx)("h1",{className:"text-lg font-semibold",children:"Cover Craft"}),(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(f,{sizes:t,currentSize:r,onSizeChange:a}),(0,n.jsx)(m,{colors:u,currentColor:l,onBackgroundChange:s})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("button",{onClick:i,className:"px-3 py-1.5 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"导出"}),(0,n.jsx)("button",{onClick:o,className:"px-3 py-1.5 text-sm bg-green-600 text-white rounded hover:bg-green-700 transition-colors",children:"复制图片"})]})]})}function b(e){let{onAddText:t}=e;return(0,n.jsx)("div",{className:"p-4",children:(0,n.jsx)("button",{onClick:t,className:"w-full px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"添加文字"})})}function v(e){let{onImageUpload:t}=e;return(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var r;let n=null===(r=e.target.files)||void 0===r?void 0:r[0];n&&t(n)},className:"hidden",id:"image-upload"}),(0,n.jsx)("label",{htmlFor:"image-upload",className:"block w-full px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-center cursor-pointer",children:"上传图片"})]})}function j(e){let{onShapeCreate:t}=e;return(0,n.jsxs)("div",{className:"p-4 space-y-2",children:[(0,n.jsx)("button",{onClick:()=>t("rectangle"),className:"w-full px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:"矩形"}),(0,n.jsx)("button",{onClick:()=>t("circle"),className:"w-full px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:"圆形"}),(0,n.jsx)("button",{onClick:()=>t("line"),className:"w-full px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:"直线"}),(0,n.jsxs)("div",{className:"mt-4 p-3 bg-gray-100 rounded text-sm text-gray-600",children:[(0,n.jsx)("p",{className:"font-semibold mb-2",children:"快捷键绘制："}),(0,n.jsxs)("ul",{className:"space-y-1",children:[(0,n.jsxs)("li",{children:[(0,n.jsx)("kbd",{className:"px-2 py-1 bg-white rounded border",children:"R"})," 矩形"]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("kbd",{className:"px-2 py-1 bg-white rounded border",children:"O"})," 圆形"]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("kbd",{className:"px-2 py-1 bg-white rounded border",children:"L"})," 直线"]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("kbd",{className:"px-2 py-1 bg-white rounded border",children:"Esc"})," 退出绘制"]})]})]})]})}function y(e){let{children:t}=e;return(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:t})}var w=r(794);function N(e){let{className:t,...r}=e;return(0,n.jsx)("input",{className:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,w.W)(t)}("w-full px-3 py-2 border border-gray-300 rounded-md","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",t),...r})}function C(e){let{value:t,onChange:r,min:l,max:a,step:s}=e,i=(t-l)/(a-l)*100;return(0,n.jsx)("div",{className:"relative",children:(0,n.jsx)("input",{type:"range",min:l,max:a,step:s,value:t,onChange:e=>r(Number(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer",style:{background:"linear-gradient(to right, #3b82f6 0%, #3b82f6 ".concat(i,"%, #e5e7eb ").concat(i,"%, #e5e7eb 100%)")}})})}function k(e){let{value:t,onChange:r,placeholder:a}=e,[s,i]=(0,l.useState)(t),o=e=>{i(e),r(e)};return(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("input",{type:"color",value:t||"#000000",onChange:e=>o(e.target.value),className:"w-12 h-10 border border-gray-300 rounded cursor-pointer"}),(0,n.jsx)(N,{value:s,onChange:e=>o(e.target.value),placeholder:a,className:"flex-1"})]})}function S(e){let{textObject:t,onChange:r}=e,[a,s]=(0,l.useState)(""),[i,o]=(0,l.useState)(24),[c,d]=(0,l.useState)("Arial"),[u,h]=(0,l.useState)("normal"),[x,g]=(0,l.useState)("normal"),[f,m]=(0,l.useState)("left"),[p,b]=(0,l.useState)("#000000"),[v,j]=(0,l.useState)(""),[w,S]=(0,l.useState)(!1),[A,E]=(0,l.useState)(!1),[z,M]=(0,l.useState)(1);(0,l.useEffect)(()=>{if(t&&"text"===t.type){var e;s(t.text||""),o(t.fontSize||24),d(t.fontFamily||"Arial"),h((null===(e=t.fontWeight)||void 0===e?void 0:e.toString())||"normal"),g(t.fontStyle||"normal"),m(t.textAlign||"left"),b("string"==typeof t.fill?t.fill:"#000000"),j(t.backgroundColor||""),S(t.underline||!1),E(t.linethrough||!1),M(t.opacity||1)}},[t]);let L=(e,n)=>{t&&(t.set(e,n),t.setCoords(),r(t),t.canvas&&t.canvas.renderAll())};return t&&"text"===t.type?(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,n.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"文本内容"}),(0,n.jsx)("div",{className:"space-y-3",children:(0,n.jsxs)("div",{children:[(0,n.jsx)(y,{children:"文字"}),(0,n.jsx)(N,{value:a,onChange:e=>{s(e.target.value),L("text",e.target.value)},placeholder:"输入文字"})]})})]}),(0,n.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,n.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"字体"}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)(y,{children:["字体大小: ",i,"px"]}),(0,n.jsx)(C,{value:i,onChange:e=>{o(e),L("fontSize",e)},min:8,max:200,step:1})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(y,{children:"字体"}),(0,n.jsxs)("select",{value:c,onChange:e=>{d(e.target.value),L("fontFamily",e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,n.jsx)("option",{value:"Arial",children:"Arial"}),(0,n.jsx)("option",{value:"Helvetica",children:"Helvetica"}),(0,n.jsx)("option",{value:"Times New Roman",children:"Times New Roman"}),(0,n.jsx)("option",{value:"Courier New",children:"Courier New"}),(0,n.jsx)("option",{value:"Verdana",children:"Verdana"}),(0,n.jsx)("option",{value:"Georgia",children:"Georgia"}),(0,n.jsx)("option",{value:"Comic Sans MS",children:"Comic Sans MS"}),(0,n.jsx)("option",{value:"Impact",children:"Impact"}),(0,n.jsx)("option",{value:"Tahoma",children:"Tahoma"}),(0,n.jsx)("option",{value:"Trebuchet MS",children:"Trebuchet MS"})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,n.jsx)("button",{onClick:()=>{let e="bold"===u?"normal":"bold";h(e),L("fontWeight",e)},className:"px-3 py-2 rounded border ".concat("bold"===u?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"),children:(0,n.jsx)("span",{className:"font-bold",children:"B"})}),(0,n.jsx)("button",{onClick:()=>{let e="italic"===x?"normal":"italic";g(e),L("fontStyle",e)},className:"px-3 py-2 rounded border ".concat("italic"===x?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"),children:(0,n.jsx)("span",{className:"italic",children:"I"})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(y,{children:"对齐方式"}),(0,n.jsx)("div",{className:"grid grid-cols-4 gap-2",children:["left","center","right","justify"].map(e=>(0,n.jsxs)("button",{onClick:()=>{m(e),L("textAlign",e)},className:"px-3 py-2 rounded border ".concat(f===e?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"),children:["left"===e&&"左","center"===e&&"中","right"===e&&"右","justify"===e&&"两"]},e))})]})]})]}),(0,n.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,n.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"样式"}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(y,{children:"填充颜色"}),(0,n.jsx)(k,{value:p,onChange:e=>{b(e),L("fill",e)},placeholder:"#000000"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(y,{children:"背景颜色"}),(0,n.jsx)(k,{value:v,onChange:e=>{j(e),L("backgroundColor",e)},placeholder:"透明"})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)(y,{children:["透明度: ",Math.round(100*z),"%"]}),(0,n.jsx)(C,{value:z,onChange:e=>{M(e),L("opacity",e)},min:0,max:1,step:.01})]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("button",{onClick:()=>{let e=!w;S(e),L("underline",e)},className:"flex-1 px-3 py-2 rounded border ".concat(w?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"),children:"下划线"}),(0,n.jsx)("button",{onClick:()=>{let e=!A;E(e),L("linethrough",e)},className:"flex-1 px-3 py-2 rounded border ".concat(A?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"),children:"删除线"})]})]})]})]}):null}function A(e){let{imageObject:t,onChange:r}=e,[a,s]=(0,l.useState)(1),[i,o]=(0,l.useState)(200),[c,d]=(0,l.useState)(200),[u,h]=(0,l.useState)(0);(0,l.useEffect)(()=>{if(t&&"image"===t.type){s(t.opacity||1),h(t.angle||0);let e=t.originalWidth||t.width||1,r=t.originalHeight||t.height||1,n=t.scaleX||1,l=t.scaleY||1;o(e*n),d(r*l)}},[t]);let x=(e,n)=>{t&&(t.set(e,n),t.setCoords(),r(t),t.canvas&&t.canvas.renderAll())};return t&&"image"===t.type?(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,n.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"尺寸"}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)(y,{children:["宽度: ",Math.round(i),"px"]}),(0,n.jsx)(C,{value:i,onChange:e=>{o(e),x("scaleX",e/(t&&(t.originalWidth||t.width)||200))},min:10,max:800,step:1})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)(y,{children:["高度: ",Math.round(c),"px"]}),(0,n.jsx)(C,{value:c,onChange:e=>{d(e),x("scaleY",e/(t&&(t.originalHeight||t.height)||200))},min:10,max:600,step:1})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)(y,{children:["旋转角度: ",Math.round(u),"\xb0"]}),(0,n.jsx)(C,{value:u,onChange:e=>{h(e),x("angle",e)},min:0,max:360,step:1})]})]})]}),(0,n.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,n.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"样式"}),(0,n.jsx)("div",{className:"space-y-3",children:(0,n.jsxs)("div",{children:[(0,n.jsxs)(y,{children:["透明度: ",Math.round(100*a),"%"]}),(0,n.jsx)(C,{value:a,onChange:e=>{s(e),x("opacity",e)},min:0,max:1,step:.01})]})})]})]}):null}function E(e){var t,r,n,l,s,i,o,c;let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=new a.fabric.Rect({left:null!==(t=d.left)&&void 0!==t?t:100,top:null!==(r=d.top)&&void 0!==r?r:100,width:null!==(n=d.width)&&void 0!==n?n:200,height:null!==(l=d.height)&&void 0!==l?l:150,fill:null!==(s=d.fill)&&void 0!==s?s:"#3b82f6",stroke:null!==(i=d.stroke)&&void 0!==i?i:"#1e40af",strokeWidth:null!==(o=d.strokeWidth)&&void 0!==o?o:2,opacity:null!==(c=d.opacity)&&void 0!==c?c:1,selectable:!0});return e.add(u),e.setActiveObject(u),e.renderAll(),u}function z(e){var t,r,n,l,s,i;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=new a.fabric.Circle({left:null!==(t=o.left)&&void 0!==t?t:100,top:null!==(r=o.top)&&void 0!==r?r:100,radius:o.width?o.width/2:75,fill:null!==(n=o.fill)&&void 0!==n?n:"#10b981",stroke:null!==(l=o.stroke)&&void 0!==l?l:"#047857",strokeWidth:null!==(s=o.strokeWidth)&&void 0!==s?s:2,opacity:null!==(i=o.opacity)&&void 0!==i?i:1,selectable:!0});return e.add(c),e.setActiveObject(c),e.renderAll(),c}function M(e){var t,r,n,l,s,i,o,c,d;let u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h=new a.fabric.Line([null!==(t=u.left)&&void 0!==t?t:100,null!==(r=u.top)&&void 0!==r?r:100,(null!==(n=u.left)&&void 0!==n?n:100)+(null!==(l=u.width)&&void 0!==l?l:200),(null!==(s=u.top)&&void 0!==s?s:100)+(null!==(i=u.height)&&void 0!==i?i:0)],{stroke:null!==(o=u.stroke)&&void 0!==o?o:"#6b7280",strokeWidth:null!==(c=u.strokeWidth)&&void 0!==c?c:3,opacity:null!==(d=u.opacity)&&void 0!==d?d:1,selectable:!0});return e.add(h),e.setActiveObject(h),e.renderAll(),h}function L(e){let{shapeObject:t,onChange:r}=e,[a,s]=(0,l.useState)("#3b82f6"),[i,o]=(0,l.useState)("#1e40af"),[c,d]=(0,l.useState)(2),[u,h]=(0,l.useState)(1),[x,g]=(0,l.useState)(200),[f,m]=(0,l.useState)(150),[p,b]=(0,l.useState)(0);(0,l.useEffect)(()=>{if(t){s("string"==typeof t.fill?t.fill:"#3b82f6"),o("string"==typeof t.stroke?t.stroke:"#1e40af"),d(t.strokeWidth||0),h(t.opacity||1),b(t.angle||0);let e=function(e){let t=e.originalWidth||e.width||0,r=e.originalHeight||e.height||0,n=e.scaleX||1,l=e.scaleY||1;return{originalWidth:t,originalHeight:r,currentWidth:t*n,currentHeight:r*l,scaleX:n,scaleY:l}}(t);g(e.currentWidth),m(e.currentHeight)}},[t]);let v=(e,n)=>{t&&(t.set(e,n),t.setCoords(),r(t),t.canvas&&t.canvas.renderAll())};return t&&["rect","circle","line"].includes(t.type||"")?(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,n.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"尺寸"}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)(y,{children:["宽度: ",Math.round(x),"px"]}),(0,n.jsx)(C,{value:x,onChange:e=>{g(e),v("scaleX",e/((null==t?void 0:t.width)||200))},min:10,max:800,step:1})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)(y,{children:["高度: ",Math.round(f),"px"]}),(0,n.jsx)(C,{value:f,onChange:e=>{m(e),v("scaleY",e/((null==t?void 0:t.height)||150))},min:10,max:600,step:1})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)(y,{children:["旋转角度: ",Math.round(p),"\xb0"]}),(0,n.jsx)(C,{value:p,onChange:e=>{b(e),v("angle",e)},min:0,max:360,step:1})]})]})]}),(0,n.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,n.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"样式"}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(y,{children:"填充颜色"}),(0,n.jsx)(k,{value:a,onChange:e=>{s(e),v("fill",e)},placeholder:"#3b82f6"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(y,{children:"边框颜色"}),(0,n.jsx)(k,{value:i,onChange:e=>{o(e),v("stroke",e)},placeholder:"#1e40af"})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)(y,{children:["边框宽度: ",c,"px"]}),(0,n.jsx)(C,{value:c,onChange:e=>{d(e),v("strokeWidth",e)},min:0,max:20,step:1})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)(y,{children:["透明度: ",Math.round(100*u),"%"]}),(0,n.jsx)(C,{value:u,onChange:e=>{h(e),v("opacity",e)},min:0,max:1,step:.01})]})]})]})]}):null}function W(e){let{canvas:t}=e,[r,a]=(0,l.useState)(null);return((0,l.useEffect)(()=>{if(!t){a(null);return}let e=e=>{a(t.getActiveObject()||null)},r=()=>{a(null)};return t.on("selection:created",e),t.on("selection:updated",e),t.on("selection:cleared",r),()=>{t.off("selection:created",e),t.off("selection:updated",e),t.off("selection:cleared",r)}},[t]),t)?(0,n.jsxs)("div",{className:"w-80 bg-white border-l border-gray-200 p-4 overflow-y-auto",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"属性"}),r?(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,n.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"对象信息"}),(0,n.jsxs)("div",{className:"text-sm space-y-1",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"类型:"}),(0,n.jsx)("span",{className:"font-medium",children:r.type})]}),void 0!==r.left&&void 0!==r.top&&(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"位置:"}),(0,n.jsxs)("span",{className:"font-medium",children:["(",Math.round(r.left),", ",Math.round(r.top),")"]})]}),void 0!==r.width&&void 0!==r.height&&(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"尺寸:"}),(0,n.jsxs)("span",{className:"font-medium",children:[Math.round(r.width)," \xd7 ",Math.round(r.height)]})]}),void 0!==r.angle&&0!==r.angle&&(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"角度:"}),(0,n.jsxs)("span",{className:"font-medium",children:[Math.round(r.angle),"\xb0"]})]}),void 0!==r.opacity&&1!==r.opacity&&(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"透明度:"}),(0,n.jsxs)("span",{className:"font-medium",children:[Math.round(100*r.opacity),"%"]})]})]})]}),"text"===r.type&&(0,n.jsx)(S,{textObject:r,onChange:()=>t.renderAll()}),"image"===r.type&&(0,n.jsx)(A,{imageObject:r,onChange:()=>t.renderAll()}),["rect","circle","line"].includes(r.type||"")&&(0,n.jsx)(L,{shapeObject:r,onChange:()=>t.renderAll()})]}):(0,n.jsx)("p",{className:"text-gray-500",children:"选择一个对象查看属性"})]}):(0,n.jsxs)("div",{className:"w-80 bg-white border-l border-gray-200 p-4",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"属性"}),(0,n.jsx)("p",{className:"text-gray-500",children:"画布未初始化"})]})}let T=(0,r(3265).Ue)(e=>({currentSize:d[0],backgroundColor:"#ffffff",setCanvasSize:t=>e({currentSize:t}),setBackgroundColor:t=>e({backgroundColor:t})}));var R=r(2886);function O(e){let{isOpen:t,onClose:r,onExport:a}=e,[s,i]=(0,l.useState)("png"),[o,c]=(0,l.useState)(1),[d,u]=(0,l.useState)(!1);return t?(0,n.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 w-96",children:[(0,n.jsx)("h2",{className:"text-xl font-bold mb-4",children:"导出设置"}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-2",children:"导出格式"}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("button",{onClick:()=>i("png"),className:"flex-1 px-4 py-2 rounded ".concat("png"===s?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"PNG"}),(0,n.jsx)("button",{onClick:()=>i("jpeg"),className:"flex-1 px-4 py-2 rounded ".concat("jpeg"===s?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"JPEG"})]})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-2",children:"导出质量"}),(0,n.jsx)("div",{className:"flex gap-2",children:[1,2,3].map(e=>(0,n.jsxs)("button",{onClick:()=>c(e),className:"flex-1 px-4 py-2 rounded ".concat(o===e?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:[e,"x"]},e))}),(0,n.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[1===o&&"标准质量（适合网页）",2===o&&"高质量（适合打印）",3===o&&"超高质量（适合专业用途）"]})]}),"png"===s&&(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsxs)("label",{className:"flex items-center",children:[(0,n.jsx)("input",{type:"checkbox",checked:d,onChange:e=>u(e.target.checked),className:"mr-2"}),(0,n.jsx)("span",{className:"text-sm font-medium",children:"透明背景"})]}),(0,n.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"导出时移除画布背景色"})]}),(0,n.jsxs)("div",{className:"flex gap-2 mt-6",children:[(0,n.jsx)("button",{onClick:r,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"取消"}),(0,n.jsx)("button",{onClick:()=>{a({format:s,quality:o,transparent:d}),r()},className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"导出"})]})]})}):null}let P={text:"双击编辑文字",fontSize:24,fontFamily:"Arial",fill:"#000000"},H=["image/jpeg","image/png","image/webp"];function I(){let[e,t]=(0,l.useState)("text"),[r,s]=(0,l.useState)(null),[i,o]=(0,l.useState)("none"),[u,f]=(0,l.useState)(!1),[m,y]=(0,l.useState)(null),[w,N]=(0,l.useState)(null),[C,k]=(0,l.useState)(!1),{setCanvas:S,addText:A}=function(){let[e,t]=(0,l.useState)(null);return{canvas:e,setCanvas:e=>{t(e)},addText:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e){c.warn("Canvas not initialized");return}try{!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{text:r="双击编辑文字",left:n=e.getWidth()/2,top:l=e.getHeight()/2,fontSize:s=24,fontFamily:i="Arial",fill:o="#000000"}=t,c=new a.fabric.Text(r,{left:n,top:l,fontSize:s,fontFamily:i,fill:o,originX:"center",originY:"center"});e.add(c),e.setActiveObject(c),e.renderAll()}(e,t)}catch(e){c.error("Failed to add text")}}}}(),L=(0,R.useToast)(),{currentSize:I,backgroundColor:D,setCanvasSize:X,setBackgroundColor:Y}=T(),q=null!=I?I:d[0],B=null!=D?D:"#ffffff";(0,l.useEffect)(()=>{r&&q&&h(r,q,!0)},[r,q]),(0,l.useEffect)(()=>{r&&B&&x(r,B)},[r,B]);let F=e=>{t(e)},U=async e=>{if(!r){L.error("画布未初始化");return}let t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{maxSize:r=10485760,allowedTypes:n=H}=t;return e?n.includes(e.type)?e.size>r?{valid:!1,error:"文件过大。最大允许 ".concat(Math.round(r/1048576),"MB")}:0===e.size?{valid:!1,error:"文件为空"}:{valid:!0}:{valid:!1,error:"不支持的文件格式。支持的格式：".concat(n.map(e=>e.split("/")[1].toUpperCase()).join(", "))}:{valid:!1,error:"未选择文件"}}(e,{maxSize:10485760,allowedTypes:["image/jpeg","image/png","image/webp"]});if(!t.valid){L.error(t.error||"文件校验失败");return}try{(await function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((n,l)=>{let s=new FileReader;s.onload=t=>{var s;let i=null===(s=t.target)||void 0===s?void 0:s.result;a.fabric.Image.fromURL(i,t=>{if(!t){l(Error("Failed to create image object"));return}let a=t.width||0,s=t.height||0,i=r.maxSize||800,o=1;(a>i||s>i)&&(o=Math.min(i/a,i/s)),t.set({left:r.left||e.getWidth()/2,top:r.top||e.getHeight()/2,originX:"center",originY:"center",scaleX:o,scaleY:o,selectable:!0}),e.add(t),e.setActiveObject(t),e.renderAll(),t.originalWidth=a,t.originalHeight=s,t.scale=o,n(t)},{crossOrigin:"anonymous"})},s.onerror=()=>{l(Error("Failed to read file"))},s.readAsDataURL(t)})}(r,e,{maxSize:800})).fileSize=e.size,L.success("图片上传成功！")}catch(e){L.error("图片上传失败，请重试")}},V=e=>{if(!r){L.error("画布未初始化");return}try{switch(e){case"rectangle":E(r);break;case"circle":z(r);break;case"line":M(r)}}catch(e){L.error("形状创建失败，请重试")}},_=async()=>{if(!r){L.error("画布未初始化");return}try{let e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return c.warn("Canvas is not initialized"),"";let{format:r="png",quality:n=1,multiplier:l=1,enableRetinaScaling:a=!0}=t;return e.toDataURL({format:"image/".concat(r),quality:n,multiplier:l,enableRetinaScaling:a})}(r,{format:"png"});await new Promise((t,r)=>{navigator.clipboard&&"function"==typeof window.fetch?fetch(e).then(e=>e.blob()).then(e=>{let r=new ClipboardItem({[e.type]:e});navigator.clipboard.write([r]),t()}).catch(r):r(Error("Clipboard API not supported"))}),L.success("图片已复制到剪贴板！")}catch(e){L.error("复制失败，请重试")}};return(0,l.useEffect)(()=>{let e=e=>{var t;if(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||(null===(t=e.target)||void 0===t?void 0:t.contentEditable)==="true")return;let r=e.key.toLowerCase();"r"===r?(e.preventDefault(),V("rectangle")):"o"===r?(e.preventDefault(),V("circle")):"l"===r&&(e.preventDefault(),V("line"))};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[r]),(0,l.useEffect)(()=>{let e=e=>{(e.ctrlKey||e.metaKey)&&"0"===e.key&&(e.preventDefault(),function(e){if(!e){c.warn("Canvas is not initialized");return}e.setViewportTransform([1,0,0,1,0,0]),e.requestRenderAll()}(r),L.success("视图已重置"))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[r,L]),(0,l.useEffect)(()=>{let e=e=>{if("INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName)switch(e.key.toLowerCase()){case"r":o("rectangle"),L.info("矩形绘制模式：在画布上拖拽绘制");break;case"o":o("circle"),L.info("圆形绘制模式：在画布上拖拽绘制");break;case"l":o("line"),L.info("直线绘制模式：在画布上拖拽绘制");break;case"escape":"none"!==i&&(o("none"),L.info("已退出绘制模式"))}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[i,L]),(0,l.useEffect)(()=>{if(!r||"none"===i)return;let e=e=>{let t=r.getPointer(e.e);f(!0),N(t),y(function(e,t,r){let n=null;switch(t){case"rectangle":n=new a.fabric.Rect({left:r.x,top:r.y,width:0,height:0,fill:"rgba(59, 130, 246, 0.3)",stroke:"#3b82f6",strokeWidth:2,selectable:!1});break;case"circle":n=new a.fabric.Circle({left:r.x,top:r.y,radius:0,fill:"rgba(59, 130, 246, 0.3)",stroke:"#3b82f6",strokeWidth:2,selectable:!1});break;case"line":n=new a.fabric.Line([r.x,r.y,r.x,r.y],{stroke:"#3b82f6",strokeWidth:2,selectable:!1})}return n&&(e.add(n),e.requestRenderAll()),n}(r,i,t))},t=e=>{u&&m&&w&&function(e,t,r,n){var l;switch(t){case"rectangle":{let t=n.x-r.x,l=n.y-r.y;e.set({width:Math.abs(t),height:Math.abs(l),left:t>0?r.x:n.x,top:l>0?r.y:n.y});break}case"circle":{let t=Math.sqrt(Math.pow(n.x-r.x,2)+Math.pow(n.y-r.y,2));e.set({radius:t});break}case"line":e.set({x2:n.x,y2:n.y})}null===(l=e.canvas)||void 0===l||l.requestRenderAll()}(m,i,w,r.getPointer(e.e))},n=()=>{u&&m&&(function(e,t,r){e.remove(t);let n=function(e,t,r){switch(t){case"rectangle":return E(e,r);case"circle":return z(e,r);case"line":return M(e,r)}}(e,r,{left:t.left,top:t.top,..."rectangle"===r&&{width:t.width,height:t.height},..."circle"===r&&{radius:t.radius},..."line"===r&&{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}});e.setActiveObject(n),e.requestRenderAll()}(r,m,i),f(!1),y(null),N(null),o("none"),L.success("形状已创建"))};return r.on("mouse:down",e),r.on("mouse:move",t),r.on("mouse:up",n),()=>{r.off("mouse:down",e),r.off("mouse:move",t),r.off("mouse:up",n)}},[r,i,u,m,w,L]),(0,n.jsxs)("div",{className:"h-screen flex flex-col",children:[(0,n.jsx)(p,{sizes:d,currentSize:q,currentBackground:B,onSizeChange:X,onBackgroundChange:Y,onOpenExportDialog:()=>k(!0),onCopy:_}),(0,n.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,n.jsxs)("div",{className:"w-64 bg-white border-r border-gray-200 flex flex-col",children:[(0,n.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,n.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"素材工具"})}),(0,n.jsxs)("div",{className:"p-4 space-y-2 border-b border-gray-200",children:[(0,n.jsxs)("button",{onClick:()=>F("text"),className:"w-full flex items-center gap-3 px-3 py-2 rounded-md ".concat("text"===e?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"),children:[(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.832.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),(0,n.jsx)("span",{children:"文字"})]}),(0,n.jsxs)("button",{onClick:()=>F("image"),className:"w-full flex items-center gap-3 px-3 py-2 rounded-md ".concat("image"===e?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"),children:[(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,n.jsx)("span",{children:"图片"})]}),(0,n.jsxs)("button",{onClick:()=>F("shape"),className:"w-full flex items-center gap-3 px-3 py-2 rounded-md ".concat("shape"===e?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"),children:[(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM7 3H5a2 2 0 00-2 2v12a4 4 0 004 4h2a2 2 0 002-2V5a2 2 0 00-2-2H7zM21 9h-4a2 2 0 00-2 2v6a2 2 0 002 2h4a2 2 0 002-2v-6a2 2 0 00-2-2z"})}),(0,n.jsx)("span",{children:"形状"})]})]}),"text"===e&&(0,n.jsx)(b,{onAddText:()=>{A(P)}}),"image"===e&&(0,n.jsx)(v,{onImageUpload:U}),"shape"===e&&(0,n.jsx)(j,{onShapeCreate:V})]}),(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsx)(g,{width:q.width,height:q.height,backgroundColor:B,onCanvasReady:e=>{S(e),s(e),h(e,q,!1),x(e,B)}})}),(0,n.jsx)(W,{canvas:r})]}),(0,n.jsx)(O,{isOpen:C,onClose:()=>k(!1),onExport:e=>{if(!r){L.error("画布未初始化");return}try{(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return c.warn("Canvas is not initialized"),null;let{format:r="png",quality:n=1,transparent:l=!1}=t,a=e.backgroundColor;l&&"png"===r&&(e.backgroundColor="");let s=e.toDataURL({format:"jpeg"===r?"jpeg":"png",quality:1,multiplier:n});return l&&"png"===r&&(e.backgroundColor=a,e.requestRenderAll()),s}(e,t);if(!r)return;let{format:n="png",filename:l}=t,a=new Date().toISOString().replace(/[-:]/g,"").replace("T","-").slice(0,15),s="cover-".concat(a,".").concat(n),i=document.createElement("a");i.download=l||s,i.href=r,document.body.appendChild(i),i.click(),document.body.removeChild(i)})(r,{format:e.format,quality:e.quality,transparent:e.transparent}),L.success("导出成功")}catch(e){L.error("导出失败，请重试")}}})]})}},2886:function(e,t,r){"use strict";r.r(t),r.d(t,{ToastProvider:function(){return i},useToast:function(){return s}});var n=r(7573),l=r(7653);let a=(0,l.createContext)(null);function s(){let e=(0,l.useContext)(a);if(!e)throw Error("useToast must be used within ToastProvider");return e}function i(e){let{children:t}=e,[r,s]=(0,l.useState)([]),i=(0,l.useCallback)(e=>{s(t=>t.filter(t=>t.id!==e))},[]),c=(0,l.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,n=Math.random().toString(36).substring(2,9),l={id:n,message:e,type:t,duration:r};s(e=>[...e,l]),r>0&&setTimeout(()=>{i(n)},r)},[i]),d=(0,l.useCallback)((e,t)=>{c(e,"success",t)},[c]),u=(0,l.useCallback)((e,t)=>{c(e,"error",t)},[c]),h=(0,l.useCallback)((e,t)=>{c(e,"info",t)},[c]),x=(0,l.useCallback)((e,t)=>{c(e,"warning",t)},[c]);return(0,n.jsxs)(a.Provider,{value:{toast:c,success:d,error:u,info:h,warning:x},children:[t,(0,n.jsx)(o,{toasts:r,onRemove:i})]})}function o(e){let{toasts:t,onRemove:r}=e;return 0===t.length?null:(0,n.jsx)("div",{style:{position:"fixed",top:"20px",right:"20px",zIndex:9999,display:"flex",flexDirection:"column",gap:"10px",pointerEvents:"none"},children:t.map(e=>(0,n.jsx)(c,{toast:e,onRemove:r},e.id))})}function c(e){let{toast:t,onRemove:r}=e,l=(e=>{switch(e){case"success":return{backgroundColor:"#10b981",borderColor:"#059669"};case"error":return{backgroundColor:"#ef4444",borderColor:"#dc2626"};case"warning":return{backgroundColor:"#f59e0b",borderColor:"#d97706"};default:return{backgroundColor:"#3b82f6",borderColor:"#2563eb"}}})(t.type);return(0,n.jsx)("div",{style:{padding:"12px 16px",color:"white",borderRadius:"6px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",maxWidth:"400px",minWidth:"200px",pointerEvents:"auto",cursor:"pointer",...l},onClick:()=>r(t.id),role:"alert",children:(0,n.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:(0,n.jsx)("span",{style:{fontSize:"14px",fontWeight:"500"},children:t.message})})})}}},function(e){e.O(0,[505,49,293,16,744],function(){return e(e.s=3596)}),_N_E=e.O()}]);