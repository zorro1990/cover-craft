"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/editor/page",{

/***/ "(app-pages-browser)/./src/lib/fabric/canvas.ts":
/*!**********************************!*\
  !*** ./src/lib/fabric/canvas.ts ***!
  \**********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CANVAS_SIZES: function() { return /* binding */ CANVAS_SIZES; },\n/* harmony export */   DEFAULT_BACKGROUNDS: function() { return /* binding */ DEFAULT_BACKGROUNDS; },\n/* harmony export */   copyToClipboard: function() { return /* binding */ copyToClipboard; },\n/* harmony export */   createCanvas: function() { return /* binding */ createCanvas; },\n/* harmony export */   downloadCanvas: function() { return /* binding */ downloadCanvas; },\n/* harmony export */   exportCanvas: function() { return /* binding */ exportCanvas; },\n/* harmony export */   panCanvas: function() { return /* binding */ panCanvas; },\n/* harmony export */   resetCanvasView: function() { return /* binding */ resetCanvasView; },\n/* harmony export */   resizeCanvas: function() { return /* binding */ resizeCanvas; },\n/* harmony export */   setCanvasBackground: function() { return /* binding */ setCanvasBackground; },\n/* harmony export */   setCanvasZoom: function() { return /* binding */ setCanvasZoom; }\n/* harmony export */ });\n/* harmony import */ var fabric__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fabric */ \"(app-pages-browser)/./node_modules/fabric/dist/fabric.js\");\n/* harmony import */ var fabric__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fabric__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_utils_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/utils/logger */ \"(app-pages-browser)/./src/lib/utils/logger.ts\");\n\n\nconst CANVAS_SIZES = [\n    {\n        width: 1080,\n        height: 1440,\n        label: \"3:4\",\n        ratio: \"3:4\"\n    },\n    {\n        width: 1080,\n        height: 1080,\n        label: \"1:1\",\n        ratio: \"1:1\"\n    },\n    {\n        width: 1080,\n        height: 810,\n        label: \"4:3\",\n        ratio: \"4:3\"\n    },\n    {\n        width: 1080,\n        height: 462,\n        label: \"21:9\",\n        ratio: \"21:9\"\n    }\n];\nconst DEFAULT_BACKGROUNDS = [\n    \"#ffffff\",\n    \"#000000\",\n    \"#f0f0f0\",\n    \"#e0e0e0\",\n    \"#d0d0d0\",\n    \"#c0c0c0\"\n];\nfunction createCanvas(canvasElement, config) {\n    const canvas = new fabric__WEBPACK_IMPORTED_MODULE_0__.fabric.Canvas(canvasElement, {\n        width: config.size.width,\n        height: config.size.height,\n        backgroundColor: config.backgroundColor\n    });\n    // Enable object caching for better performance\n    // @ts-ignore - objectCaching property\n    canvas.objectCaching = true;\n    // Set default controls\n    fabric__WEBPACK_IMPORTED_MODULE_0__.fabric.Object.prototype.set({\n        transparentCorners: false,\n        cornerColor: \"#3b82f6\",\n        cornerStyle: \"circle\",\n        borderColor: \"#3b82f6\",\n        borderScaleFactor: 2\n    });\n    return canvas;\n}\nfunction resizeCanvas(canvas, size) {\n    let preserveContent = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : true;\n    if (!canvas) {\n        _lib_utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.warn(\"Canvas is not initialized\");\n        return;\n    }\n    if (!size || typeof size.width !== \"number\" || typeof size.height !== \"number\") {\n        _lib_utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.warn(\"Invalid canvas size provided to resizeCanvas\");\n        return;\n    }\n    const oldWidth = canvas.getWidth();\n    const oldHeight = canvas.getHeight();\n    canvas.setDimensions({\n        width: size.width,\n        height: size.height\n    });\n    if (preserveContent) {\n        const scaleX = size.width / oldWidth;\n        const scaleY = size.height / oldHeight;\n        const objects = canvas.getObjects();\n        objects.forEach((obj)=>{\n            obj.scaleX = (obj.scaleX || 1) * scaleX;\n            obj.scaleY = (obj.scaleY || 1) * scaleY;\n            obj.left = (obj.left || 0) * scaleX;\n            obj.top = (obj.top || 0) * scaleY;\n            obj.setCoords();\n        });\n    }\n    canvas.renderAll();\n}\nfunction setCanvasBackground(canvas, color) {\n    if (!canvas) {\n        _lib_utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.warn(\"Canvas is not initialized\");\n        return;\n    }\n    canvas.setBackgroundColor(color, ()=>{\n        canvas.renderAll();\n    });\n}\nfunction exportCanvas(canvas) {\n    let options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};\n    if (!canvas) {\n        _lib_utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.warn(\"Canvas is not initialized\");\n        return \"\";\n    }\n    const { format = \"png\", quality = 1, multiplier = 1, enableRetinaScaling = true } = options;\n    return canvas.toDataURL({\n        format: \"image/\".concat(format),\n        quality,\n        multiplier,\n        enableRetinaScaling\n    });\n}\nfunction copyToClipboard(dataUrl) {\n    return new Promise((resolve, reject)=>{\n        if (navigator.clipboard && typeof window.fetch === \"function\") {\n            fetch(dataUrl).then((res)=>res.blob()).then((blob)=>{\n                const item = new ClipboardItem({\n                    [blob.type]: blob\n                });\n                navigator.clipboard.write([\n                    item\n                ]);\n                resolve();\n            }).catch(reject);\n        } else {\n            reject(new Error(\"Clipboard API not supported\"));\n        }\n    });\n}\nfunction downloadCanvas(canvas) {\n    let filename = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : \"cover-\".concat(Date.now(), \".png\"), format = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : \"png\";\n    if (!canvas) {\n        _lib_utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.warn(\"Canvas is not initialized\");\n        return;\n    }\n    const dataUrl = exportCanvas(canvas, {\n        format\n    });\n    const link = document.createElement(\"a\");\n    link.download = filename;\n    link.href = dataUrl;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n}\n/**\n * 设置画布缩放级别\n * @param canvas Fabric.js Canvas 实例\n * @param zoom 缩放级别（1 = 100%）\n * @param point 缩放中心点（可选，默认为画布中心）\n */ function setCanvasZoom(canvas, zoom, point) {\n    if (!canvas) {\n        _lib_utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.warn(\"Canvas is not initialized\");\n        return;\n    }\n    // 限制缩放范围 0.1x - 5x\n    const clampedZoom = Math.max(0.1, Math.min(5, zoom));\n    if (point) {\n        canvas.zoomToPoint(new fabric__WEBPACK_IMPORTED_MODULE_0__.fabric.Point(point.x, point.y), clampedZoom);\n    } else {\n        canvas.setZoom(clampedZoom);\n    }\n    canvas.requestRenderAll();\n}\n/**\n * 重置画布视图（100% 缩放，居中）\n * @param canvas Fabric.js Canvas 实例\n */ function resetCanvasView(canvas) {\n    if (!canvas) {\n        _lib_utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.warn(\"Canvas is not initialized\");\n        return;\n    }\n    canvas.setViewportTransform([\n        1,\n        0,\n        0,\n        1,\n        0,\n        0\n    ]);\n    canvas.requestRenderAll();\n}\n/**\n * 平移画布视图\n * @param canvas Fabric.js Canvas 实例\n * @param deltaX X 轴偏移量\n * @param deltaY Y 轴偏移量\n */ function panCanvas(canvas, deltaX, deltaY) {\n    if (!canvas) {\n        _lib_utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.warn(\"Canvas is not initialized\");\n        return;\n    }\n    const vpt = canvas.viewportTransform;\n    if (vpt) {\n        vpt[4] += deltaX;\n        vpt[5] += deltaY;\n        canvas.requestRenderAll();\n    }\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvZmFicmljL2NhbnZhcy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUErQjtBQUNZO0FBR3BDLE1BQU1FLGVBQTZCO0lBQ3hDO1FBQUVDLE9BQU87UUFBTUMsUUFBUTtRQUFNQyxPQUFPO1FBQU9DLE9BQU87SUFBTTtJQUN4RDtRQUFFSCxPQUFPO1FBQU1DLFFBQVE7UUFBTUMsT0FBTztRQUFPQyxPQUFPO0lBQU07SUFDeEQ7UUFBRUgsT0FBTztRQUFNQyxRQUFRO1FBQUtDLE9BQU87UUFBT0MsT0FBTztJQUFNO0lBQ3ZEO1FBQUVILE9BQU87UUFBTUMsUUFBUTtRQUFLQyxPQUFPO1FBQVFDLE9BQU87SUFBTztDQUMxRDtBQUVNLE1BQU1DLHNCQUFzQjtJQUNqQztJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7Q0FDRDtBQUVNLFNBQVNDLGFBQ2RDLGFBQWdDLEVBQ2hDQyxNQUFvQjtJQUVwQixNQUFNQyxTQUFTLElBQUlYLDBDQUFNQSxDQUFDWSxNQUFNLENBQUNILGVBQWU7UUFDOUNOLE9BQU9PLE9BQU9HLElBQUksQ0FBQ1YsS0FBSztRQUN4QkMsUUFBUU0sT0FBT0csSUFBSSxDQUFDVCxNQUFNO1FBQzFCVSxpQkFBaUJKLE9BQU9JLGVBQWU7SUFDekM7SUFFQSwrQ0FBK0M7SUFDL0Msc0NBQXNDO0lBQ3RDSCxPQUFPSSxhQUFhLEdBQUc7SUFFdkIsdUJBQXVCO0lBQ3ZCZiwwQ0FBTUEsQ0FBQ2dCLE1BQU0sQ0FBQ0MsU0FBUyxDQUFDQyxHQUFHLENBQUM7UUFDMUJDLG9CQUFvQjtRQUNwQkMsYUFBYTtRQUNiQyxhQUFhO1FBQ2JDLGFBQWE7UUFDYkMsbUJBQW1CO0lBQ3JCO0lBRUEsT0FBT1o7QUFDVDtBQUVPLFNBQVNhLGFBQ2RiLE1BQXFCLEVBQ3JCRSxJQUFnQjtRQUNoQlksa0JBQUFBLGlFQUEyQjtJQUUzQixJQUFJLENBQUNkLFFBQVE7UUFDWFYscURBQU1BLENBQUN5QixJQUFJLENB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O0lBQ3pCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2xpYi9mYWJyaWMvY2FudmFzLnRzP2RhZmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZmFicmljIH0gZnJvbSAnZmFicmljJ1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnQC9saWIvdXRpbHMvbG9nZ2VyJ1xuaW1wb3J0IHR5cGUgeyBDYW52YXNDb25maWcsIENhbnZhc1NpemUgfSBmcm9tICdAY292ZXItY3JhZnQvc2hhcmVkLXR5cGVzJ1xuXG5leHBvcnQgY29uc3QgQ0FOVkFTX1NJWkVTOiBDYW52YXNTaXplW10gPSBbXG4gIHsgd2lkdGg6IDEwODAsIGhlaWdodDogMTQ0MCwgbGFiZWw6ICczOjQnLCByYXRpbzogJzM6NCcgfSxcbiAgeyB3aWR0aDogMTA4MCwgaGVpZ2h0OiAxMDgwLCBsYWJlbDogJzE6MScsIHJhdGlvOiAnMToxJyB9LFxuICB7IHdpZHRoOiAxMDgwLCBoZWlnaHQ6IDgxMCwgbGFiZWw6ICc0OjMnLCByYXRpbzogJzQ6MycgfSxcbiAgeyB3aWR0aDogMTA4MCwgaGVpZ2h0OiA0NjIsIGxhYmVsOiAnMjE6OScsIHJhdGlvOiAnMjE6OScgfSxcbl1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfQkFDS0dST1VORFMgPSBbXG4gICcjZmZmZmZmJyxcbiAgJyMwMDAwMDAnLFxuICAnI2YwZjBmMCcsXG4gICcjZTBlMGUwJyxcbiAgJyNkMGQwZDAnLFxuICAnI2MwYzBjMCcsXG5dXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDYW52YXMoXG4gIGNhbnZhc0VsZW1lbnQ6IEhUTUxDYW52YXNFbGVtZW50LFxuICBjb25maWc6IENhbnZhc0NvbmZpZ1xuKTogZmFicmljLkNhbnZhcyB7XG4gIGNvbnN0IGNhbnZhcyA9IG5ldyBmYWJyaWMuQ2FudmFzKGNhbnZhc0VsZW1lbnQsIHtcbiAgICB3aWR0aDogY29uZmlnLnNpemUud2lkdGgsXG4gICAgaGVpZ2h0OiBjb25maWcuc2l6ZS5oZWlnaHQsXG4gICAgYmFja2dyb3VuZENvbG9yOiBjb25maWcuYmFja2dyb3VuZENvbG9yLFxuICB9KVxuXG4gIC8vIEVuYWJsZSBvYmplY3QgY2FjaGluZyBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlXG4gIC8vIEB0cy1pZ25vcmUgLSBvYmplY3RDYWNoaW5nIHByb3BlcnR5XG4gIGNhbnZhcy5vYmplY3RDYWNoaW5nID0gdHJ1ZVxuXG4gIC8vIFNldCBkZWZhdWx0IGNvbnRyb2xzXG4gIGZhYnJpYy5PYmplY3QucHJvdG90eXBlLnNldCh7XG4gICAgdHJhbnNwYXJlbnRDb3JuZXJzOiBmYWxzZSxcbiAgICBjb3JuZXJDb2xvcjogJyMzYjgyZjYnLFxuICAgIGNvcm5lclN0eWxlOiAnY2lyY2xlJyxcbiAgICBib3JkZXJDb2xvcjogJyMzYjgyZjYnLFxuICAgIGJvcmRlclNjYWxlRmFjdG9yOiAyLFxuICB9KVxuXG4gIHJldHVybiBjYW52YXNcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlc2l6ZUNhbnZhcyhcbiAgY2FudmFzOiBmYWJyaWMuQ2FudmFzLFxuICBzaXplOiBDYW52YXNTaXplLFxuICBwcmVzZXJ2ZUNvbnRlbnQ6IGJvb2xlYW4gPSB0cnVlXG4pIHtcbiAgaWYgKCFjYW52YXMpIHtcbiAgICBsb2dnZXIud2FybignQ2FudmFzIGlzIG5vdCBpbml0aWFsaXplZCcpXG4gICAgcmV0dXJuXG4gIH1cblxuICBpZiAoXG4gICAgIXNpemUgfHxcbiAgICB0eXBlb2Ygc2l6ZS53aWR0aCAhPT0gJ251bWJlcicgfHxcbiAgICB0eXBlb2Ygc2l6ZS5oZWlnaHQgIT09ICdudW1iZXInXG4gICkge1xuICAgIGxvZ2dlci53YXJuKCdJbnZhbGlkIGNhbnZhcyBzaXplIHByb3ZpZGVkIHRvIHJlc2l6ZUNhbnZhcycpXG4gICAgcmV0dXJuXG4gIH1cblxuICBjb25zdCBvbGRXaWR0aCA9IGNhbnZhcy5nZXRXaWR0aCgpXG4gIGNvbnN0IG9sZEhlaWdodCA9IGNhbnZhcy5nZXRIZWlnaHQoKVxuXG4gIGNhbnZhcy5zZXREaW1lbnNpb25zKHtcbiAgICB3aWR0aDogc2l6ZS53aWR0aCxcbiAgICBoZWlnaHQ6IHNpemUuaGVpZ2h0LFxuICB9KVxuXG4gIGlmIChwcmVzZXJ2ZUNvbnRlbnQpIHtcbiAgICBjb25zdCBzY2FsZVggPSBzaXplLndpZHRoIC8gb2xkV2lkdGhcbiAgICBjb25zdCBzY2FsZVkgPSBzaXplLmhlaWdodCAvIG9sZEhlaWdodFxuICAgIGNvbnN0IG9iamVjdHMgPSBjYW52YXMuZ2V0T2JqZWN0cygpXG4gICAgb2JqZWN0cy5mb3JFYWNoKChvYmopID0+IHtcbiAgICAgIG9iai5zY2FsZVggPSAob2JqLnNjYWxlWCB8fCAxKSAqIHNjYWxlWFxuICAgICAgb2JqLnNjYWxlWSA9IChvYmouc2NhbGVZIHx8IDEpICogc2NhbGVZXG4gICAgICBvYmoubGVmdCA9IChvYmoubGVmdCB8fCAwKSAqIHNjYWxlWFxuICAgICAgb2JqLnRvcCA9IChvYmoudG9wIHx8IDApICogc2NhbGVZXG4gICAgICBvYmouc2V0Q29vcmRzKClcbiAgICB9KVxuICB9XG5cbiAgY2FudmFzLnJlbmRlckFsbCgpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRDYW52YXNCYWNrZ3JvdW5kKFxuICBjYW52YXM6IGZhYnJpYy5DYW52YXMsXG4gIGNvbG9yOiBzdHJpbmdcbikge1xuICBpZiAoIWNhbnZhcykge1xuICAgIGxvZ2dlci53YXJuKCdDYW52YXMgaXMgbm90IGluaXRpYWxpemVkJylcbiAgICByZXR1cm5cbiAgfVxuXG4gIGNhbnZhcy5zZXRCYWNrZ3JvdW5kQ29sb3IoY29sb3IsICgpID0+IHtcbiAgICBjYW52YXMucmVuZGVyQWxsKClcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4cG9ydENhbnZhcyhcbiAgY2FudmFzOiBmYWJyaWMuQ2FudmFzLFxuICBvcHRpb25zOiB7XG4gICAgZm9ybWF0PzogJ3BuZycgfCAnanBnJ1xuICAgIHF1YWxpdHk/OiBudW1iZXJcbiAgICBtdWx0aXBsaWVyPzogbnVtYmVyXG4gICAgZW5hYmxlUmV0aW5hU2NhbGluZz86IGJvb2xlYW5cbiAgfSA9IHt9XG4pOiBzdHJpbmcge1xuICBpZiAoIWNhbnZhcykge1xuICAgIGxvZ2dlci53YXJuKCdDYW52YXMgaXMgbm90IGluaXRpYWxpemVkJylcbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIGNvbnN0IHtcbiAgICBmb3JtYXQgPSAncG5nJyxcbiAgICBxdWFsaXR5ID0gMSxcbiAgICBtdWx0aXBsaWVyID0gMSxcbiAgICBlbmFibGVSZXRpbmFTY2FsaW5nID0gdHJ1ZSxcbiAgfSA9IG9wdGlvbnNcblxuICByZXR1cm4gY2FudmFzLnRvRGF0YVVSTCh7XG4gICAgZm9ybWF0OiBgaW1hZ2UvJHtmb3JtYXR9YCxcbiAgICBxdWFsaXR5LFxuICAgIG11bHRpcGxpZXIsXG4gICAgZW5hYmxlUmV0aW5hU2NhbGluZyxcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvcHlUb0NsaXBib2FyZChkYXRhVXJsOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBpZiAobmF2aWdhdG9yLmNsaXBib2FyZCAmJiB0eXBlb2Ygd2luZG93LmZldGNoID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBmZXRjaChkYXRhVXJsKVxuICAgICAgICAudGhlbigocmVzKSA9PiByZXMuYmxvYigpKVxuICAgICAgICAudGhlbigoYmxvYikgPT4ge1xuICAgICAgICAgIGNvbnN0IGl0ZW0gPSBuZXcgQ2xpcGJvYXJkSXRlbSh7IFtibG9iLnR5cGVdOiBibG9iIH0pXG4gICAgICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZShbaXRlbV0pXG4gICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChyZWplY3QpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoJ0NsaXBib2FyZCBBUEkgbm90IHN1cHBvcnRlZCcpKVxuICAgIH1cbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvd25sb2FkQ2FudmFzKFxuICBjYW52YXM6IGZhYnJpYy5DYW52YXMsXG4gIGZpbGVuYW1lOiBzdHJpbmcgPSBgY292ZXItJHtEYXRlLm5vdygpfS5wbmdgLFxuICBmb3JtYXQ6ICdwbmcnIHwgJ2pwZycgPSAncG5nJ1xuKSB7XG4gIGlmICghY2FudmFzKSB7XG4gICAgbG9nZ2VyLndhcm4oJ0NhbnZhcyBpcyBub3QgaW5pdGlhbGl6ZWQnKVxuICAgIHJldHVyblxuICB9XG5cbiAgY29uc3QgZGF0YVVybCA9IGV4cG9ydENhbnZhcyhjYW52YXMsIHsgZm9ybWF0IH0pXG4gIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJylcbiAgbGluay5kb3dubG9hZCA9IGZpbGVuYW1lXG4gIGxpbmsuaHJlZiA9IGRhdGFVcmxcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsaW5rKVxuICBsaW5rLmNsaWNrKClcbiAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChsaW5rKVxufVxuXG4vKipcbiAqIOiuvue9rueUu+W4g+e8qeaUvue6p+WIq1xuICogQHBhcmFtIGNhbnZhcyBGYWJyaWMuanMgQ2FudmFzIOWunuS+i1xuICogQHBhcmFtIHpvb20g57yp5pS+57qn5Yir77yIMSA9IDEwMCXvvIlcbiAqIEBwYXJhbSBwb2ludCDnvKnmlL7kuK3lv4PngrnvvIjlj6/pgInvvIzpu5jorqTkuLrnlLvluIPkuK3lv4PvvIlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldENhbnZhc1pvb20oXG4gIGNhbnZhczogZmFicmljLkNhbnZhcyB8IG51bGwsXG4gIHpvb206IG51bWJlcixcbiAgcG9pbnQ/OiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH1cbikge1xuICBpZiAoIWNhbnZhcykge1xuICAgIGxvZ2dlci53YXJuKCdDYW52YXMgaXMgbm90IGluaXRpYWxpemVkJylcbiAgICByZXR1cm5cbiAgfVxuXG4gIC8vIOmZkOWItue8qeaUvuiMg+WbtCAwLjF4IC0gNXhcbiAgY29uc3QgY2xhbXBlZFpvb20gPSBNYXRoLm1heCgwLjEsIE1hdGgubWluKDUsIHpvb20pKVxuXG4gIGlmIChwb2ludCkge1xuICAgIGNhbnZhcy56b29tVG9Qb2ludChuZXcgZmFicmljLlBvaW50KHBvaW50LngsIHBvaW50LnkpLCBjbGFtcGVkWm9vbSlcbiAgfSBlbHNlIHtcbiAgICBjYW52YXMuc2V0Wm9vbShjbGFtcGVkWm9vbSlcbiAgfVxuXG4gIGNhbnZhcy5yZXF1ZXN0UmVuZGVyQWxsKClcbn1cblxuLyoqXG4gKiDph43nva7nlLvluIPop4blm77vvIgxMDAlIOe8qeaUvu+8jOWxheS4re+8iVxuICogQHBhcmFtIGNhbnZhcyBGYWJyaWMuanMgQ2FudmFzIOWunuS+i1xuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRDYW52YXNWaWV3KGNhbnZhczogZmFicmljLkNhbnZhcyB8IG51bGwpIHtcbiAgaWYgKCFjYW52YXMpIHtcbiAgICBsb2dnZXIud2FybignQ2FudmFzIGlzIG5vdCBpbml0aWFsaXplZCcpXG4gICAgcmV0dXJuXG4gIH1cblxuICBjYW52YXMuc2V0Vmlld3BvcnRUcmFuc2Zvcm0oWzEsIDAsIDAsIDEsIDAsIDBdKVxuICBjYW52YXMucmVxdWVzdFJlbmRlckFsbCgpXG59XG5cbi8qKlxuICog5bmz56e755S75biD6KeG5Zu+XG4gKiBAcGFyYW0gY2FudmFzIEZhYnJpYy5qcyBDYW52YXMg5a6e5L6LXG4gKiBAcGFyYW0gZGVsdGFYIFgg6L205YGP56e76YePXG4gKiBAcGFyYW0gZGVsdGFZIFkg6L205YGP56e76YePXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYW5DYW52YXMoXG4gIGNhbnZhczogZmFicmljLkNhbnZhcyB8IG51bGwsXG4gIGRlbHRhWDogbnVtYmVyLFxuICBkZWx0YVk6IG51bWJlclxuKSB7XG4gIGlmICghY2FudmFzKSB7XG4gICAgbG9nZ2VyLndhcm4oJ0NhbnZhcyBpcyBub3QgaW5pdGlhbGl6ZWQnKVxuICAgIHJldHVyblxuICB9XG5cbiAgY29uc3QgdnB0ID0gY2FudmFzLnZpZXdwb3J0VHJhbnNmb3JtXG4gIGlmICh2cHQpIHtcbiAgICB2cHRbNF0gKz0gZGVsdGFYXG4gICAgdnB0WzVdICs9IGRlbHRhWVxuICAgIGNhbnZhcy5yZXF1ZXN0UmVuZGVyQWxsKClcbiAgfVxufVxuIl0sIm5hbWVzIjpbImZhYnJpYyIsImxvZ2dlciIsIkNBTlZBU19TSVpFUyIsIndpZHRoIiwiaGVpZ2h0IiwibGFiZWwiLCJyYXRpbyIsIkRFRkFVTFRfQkFDS0dST1VORFMiLCJjcmVhdGVDYW52YXMiLCJjYW52YXNFbGVtZW50IiwiY29uZmlnIiwiY2FudmFzIiwiQ2FudmFzIiwic2l6ZSIsImJhY2tncm91bmRDb2xvciIsIm9iamVjdENhY2hpbmciLCJPYmplY3QiLCJwcm90b3R5cGUiLCJzZXQiLCJ0cmFuc3BhcmVudENvcm5lcnMiLCJjb3JuZXJDb2xvciIsImNvcm5lclN0eWxlIiwiYm9yZGVyQ29sb3IiLCJib3JkZXJTY2FsZUZhY3RvciIsInJlc2l6ZUNhbnZhcyIsInByZXNlcnZlQ29udGVudCIsIndhcm4iLCJvbGRXaWR0aCIsImdldFdpZHRoIiwib2xkSGVpZ2h0IiwiZ2V0SGVpZ2h0Iiwic2V0RGltZW5zaW9ucyIsInNjYWxlWCIsInNjYWxlWSIsIm9iamVjdHMiLCJnZXRPYmplY3RzIiwiZm9yRWFjaCIsIm9iaiIsImxlZnQiLCJ0b3AiLCJzZXRDb29yZHMiLCJyZW5kZXJBbGwiLCJzZXRDYW52YXNCYWNrZ3JvdW5kIiwiY29sb3IiLCJzZXRCYWNrZ3JvdW5kQ29sb3IiLCJleHBvcnRDYW52YXMiLCJvcHRpb25zIiwiZm9ybWF0IiwicXVhbGl0eSIsIm11bHRpcGxpZXIiLCJlbmFibGVSZXRpbmFTY2FsaW5nIiwidG9EYXRhVVJMIiwiY29weVRvQ2xpcGJvYXJkIiwiZGF0YVVybCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwibmF2aWdhdG9yIiwiY2xpcGJvYXJkIiwid2luZG93IiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwiYmxvYiIsIml0ZW0iLCJDbGlwYm9hcmRJdGVtIiwidHlwZSIsIndyaXRlIiwiY2F0Y2giLCJFcnJvciIsImRvd25sb2FkQ2FudmFzIiwiZmlsZW5hbWUiLCJEYXRlIiwibm93IiwibGluayIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImRvd25sb2FkIiwiaHJlZiIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImNsaWNrIiwicmVtb3ZlQ2hpbGQiLCJzZXRDYW52YXNab29tIiwiem9vbSIsInBvaW50IiwiY2xhbXBlZFpvb20iLCJNYXRoIiwibWF4IiwibWluIiwiem9vbVRvUG9pbnQiLCJQb2ludCIsIngiLCJ5Iiwic2V0Wm9vbSIsInJlcXVlc3RSZW5kZXJBbGwiLCJyZXNldENhbnZhc1ZpZXciLCJzZXRWaWV3cG9ydFRyYW5zZm9ybSIsInBhbkNhbnZhcyIsImRlbHRhWCIsImRlbHRhWSIsInZwdCIsInZpZXdwb3J0VHJhbnNmb3JtIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/fabric/canvas.ts\n"));

/***/ })

});