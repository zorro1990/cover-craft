# Epic 2 å®Œæˆæ€»ç»“æŠ¥å‘Š

## é¡¹ç›®æ¦‚è¿°

**é¡¹ç›®åç§°**: Cover Craft - æ™ºèƒ½å°é¢è®¾è®¡ç¼–è¾‘å™¨
**Epic ç‰ˆæœ¬**: v2.0.0 (Epic 1 MVP + Epic 2 Advanced Editing)
**å®Œæˆæ—¥æœŸ**: 2025-11-02
**çŠ¶æ€**: âœ… Epic 1 + Epic 2 å·²å®Œæˆ

---

## å®Œæ•´å¼€å‘å†ç¨‹

### Epic 1: MVP (å·²å…¨éƒ¨å®Œæˆ) âœ…

#### Iteration 1: Canvas + Export (US-101) âœ…
- Canvas ç”»å¸ƒç³»ç»Ÿ
- å¤šå°ºå¯¸æ”¯æŒ
- å¯¼å‡ºåŠŸèƒ½

#### Iteration 2: Text Editing (US-102) âœ…
- æ–‡æœ¬ç¼–è¾‘å™¨
- å­—ä½“ç³»ç»Ÿ
- å±æ€§é¢æ¿

#### Iteration 3: Image Upload (US-103) âœ…
- å›¾ç‰‡ä¸Šä¼ 
- æ–‡ä»¶éªŒè¯
- å›¾ç‰‡ç¼–è¾‘

#### Iteration 4: Shape Drawing (US-104) âœ…
- å½¢çŠ¶ç»˜åˆ¶
- å¿«æ·é”®æ”¯æŒ
- å½¢çŠ¶ç¼–è¾‘

#### Iteration 5: æ€»ç»“ä¸ä¼˜åŒ– âœ…
- æ€§èƒ½ä¼˜åŒ–
- ç”¨æˆ·ä½“éªŒ
- é”™è¯¯å¤„ç†

---

### Epic 2: Advanced Editing (å·²å…¨éƒ¨å®Œæˆ) âœ…

#### Iteration 1: é«˜çº§æ–‡æœ¬æ ¼å¼åŒ– (US-201) âœ…

**æ–°å¢åŠŸèƒ½**:
- âœ… ä¸‹åˆ’çº¿ (Underline)
  - å¿«é€Ÿåˆ‡æ¢æŒ‰é’®
  - å®æ—¶é¢„è§ˆ
  - æ”¯æŒä¸å…¶ä»–æ•ˆæœç»„åˆ

- âœ… åˆ é™¤çº¿ (Strikethrough)
  - å¿«é€Ÿåˆ‡æ¢æŒ‰é’®
  - å®æ—¶é¢„è§ˆ
  - æ”¯æŒä¸å…¶ä»–æ•ˆæœç»„åˆ

- âœ… æ–‡å­—é˜´å½± (Text Shadow)
  - é¢œè‰²é€‰æ‹©å™¨
  - æ¨¡ç³Šåº¦è°ƒæ•´ (0-20)
  - æ°´å¹³åç§» (-20 åˆ° 20)
  - å‚ç›´åç§» (-20 åˆ° 20)
  - é¢„è®¾æ ·å¼æ”¯æŒ

**æŠ€æœ¯å®ç°**:
- æ–‡ä»¶: `apps/web/src/lib/fabric/text.ts`
- ç»„ä»¶: `apps/web/src/components/editor/PropertyPanel/TextProperties.tsx`
- æµ‹è¯•: `apps/web/tests/lib/fabric/text.test.ts`

---

#### Iteration 2: æ–‡æœ¬æ•ˆæœ (US-202) âœ…

**æ–°å¢åŠŸèƒ½**:
- âœ… æ¸å˜æ–‡å­— (Gradient Text)
  - çº¿æ€§æ¸å˜
  - å¾„å‘æ¸å˜ (é¢„ç•™)
  - å¤šè‰²èŠ‚ç‚¹æ”¯æŒ
  - å®æ—¶æ¸å˜é¢„è§ˆ

- âœ… æ–‡å­—æè¾¹ (Text Outline)
  - è‡ªå®šä¹‰æè¾¹é¢œè‰²
  - å¯è°ƒèŠ‚æè¾¹å®½åº¦ (0-10px)
  - æè¾¹ä¸å¡«å……ç»„åˆ

**æŠ€æœ¯å®ç°**:
```typescript
// æ¸å˜è®¾ç½®
const gradient = new fabric.Gradient({
  type: 'linear',
  coords: { x1: 0, y1: 0, x2: width, y2: 0 },
  colorStops: [
    { offset: 0, color: '#ff0000' },
    { offset: 1, color: '#0000ff' },
  ],
})

// æè¾¹è®¾ç½®
textObject.set('stroke', color)
textObject.set('strokeWidth', width)
```

---

#### Iteration 3: å›¾ç‰‡æ»¤é•œä¸è°ƒæ•´ (US-203) âœ…

**æ–°å¢åŠŸèƒ½**:
- âœ… å›¾ç‰‡æ»¤é•œ
  - é»‘ç™½æ»¤é•œ
  - å¤å¤æ»¤é•œ
  - æ¨¡ç³Šæ»¤é•œ
  - äº®åº¦è°ƒæ•´
  - å¯¹æ¯”åº¦è°ƒæ•´
  - é¥±å’Œåº¦è°ƒæ•´

**æŠ€æœ¯å®ç°**:
```typescript
// äº®åº¦æ»¤é•œ
const brightnessFilter = new fabric.Image.filters.Brightness({
  brightness: 0.3,
})

// å¯¹æ¯”åº¦æ»¤é•œ
const contrastFilter = new fabric.Image.filters.Contrast({
  contrast: 0.2,
})

// åº”ç”¨æ»¤é•œ
imageObject.filters = [brightnessFilter, contrastFilter]
imageObject.applyFilters()
canvas.renderAll()
```

---

#### Iteration 4: å›¾ç‰‡è£å‰ª (US-204) âœ…

**æ–°å¢åŠŸèƒ½**:
- âœ… äº¤äº’å¼è£å‰ª
  - è£å‰ªæ§åˆ¶ç‚¹
  - è‡ªå®šä¹‰è£å‰ªæ¯”ä¾‹
  - è‡ªç”±è£å‰ªæ¨¡å¼
  - é‡ç½®è£å‰ª
  - åº”ç”¨/å–æ¶ˆè£å‰ª

**æŠ€æœ¯å®ç°**:
- è£å‰ªæ¨¡å¼åˆ‡æ¢
- è£å‰ªæ¡†æ˜¾ç¤º
- å®æ—¶é¢„è§ˆ
- è£å‰ªåº”ç”¨ç®—æ³•

---

#### Iteration 5: æ›´å¤šå½¢çŠ¶ç±»å‹ (US-206) âœ…

**æ–°å¢åŠŸèƒ½**:
- âœ… ä¸‰è§’å½¢ (Triangle)
  - ç­‰è…°ä¸‰è§’å½¢
  - ç›´è§’ä¸‰è§’å½¢ (é¢„ç•™)
  - è‡ªå®šä¹‰å¤§å°å’Œé¢œè‰²

- âœ… æ˜Ÿå½¢ (Star)
  - äº”è§’æ˜Ÿ
  - å¯è°ƒèŠ‚è§’æ•°
  - å¯è°ƒèŠ‚å†…å¤–å¾„æ¯”ä¾‹

- âœ… ç®­å¤´ (Arrow)
  - å·¦ç®­å¤´
  - å³ç®­å¤´
  - ä¸Šä¸‹ç®­å¤´ (é¢„ç•™)
  - å¯è°ƒèŠ‚ç®­å¤´æ¡åº¦

**æŠ€æœ¯å®ç°**:
```typescript
// åˆ›å»ºæ˜Ÿå½¢
export function createStar(
  canvas: fabric.Canvas,
  options: ShapeOptions = {}
): fabric.Polygon {
  const points = []
  const outerRadius = 50
  const innerRadius = 25
  const spikes = 5

  for (let i = 0; i < spikes * 2; i++) {
    const radius = i % 2 === 0 ? outerRadius : innerRadius
    const angle = (i * Math.PI) / spikes
    points.push({
      x: Math.cos(angle) * radius,
      y: Math.sin(angle) * radius,
    })
  }

  const star = new fabric.Polygon(points, {
    left: options.left ?? 100,
    top: options.top ?? 100,
    fill: options.fill ?? '#f59e0b',
    stroke: options.stroke ?? '#d97706',
    strokeWidth: options.strokeWidth ?? 2,
    selectable: true,
  })

  canvas.add(star)
  canvas.setActiveObject(star)
  canvas.renderAll()

  return star
}
```

---

#### Iteration 6: é¢œè‰²é€‰æ‹©å™¨ç³»ç»Ÿ (US-207) âœ…

**æ–°å¢åŠŸèƒ½**:
- âœ… ç»Ÿä¸€é¢œè‰²é€‰æ‹©å™¨
  - è‰²ç›¸é€‰æ‹©
  - é¥±å’Œåº¦é€‰æ‹©
  - äº®åº¦é€‰æ‹©
  - é¢„è®¾é¢œè‰²è°ƒè‰²æ¿
  - æœ€è¿‘ä½¿ç”¨é¢œè‰²
  - è‡ªå®šä¹‰é¢œè‰²ä¿å­˜

**æŠ€æœ¯å®ç°**:
- HSL é¢œè‰²æ¨¡å‹
- é¢œè‰²å†å²è®°å½•
- è°ƒè‰²æ¿ç®¡ç†
- é¢œè‰²é€‰æ‹©å™¨ç»„ä»¶

---

#### Iteration 7: å¯¹é½ä¸åˆ†å¸ƒå·¥å…· (US-209) âœ…

**æ–°å¢åŠŸèƒ½**:
- âœ… å¯¹é½å·¥å…·
  - å·¦å¯¹é½
  - å±…ä¸­å¯¹é½
  - å³å¯¹é½
  - é¡¶éƒ¨å¯¹é½
  - å‚ç›´å±…ä¸­
  - åº•éƒ¨å¯¹é½

- âœ… åˆ†å¸ƒå·¥å…·
  - æ°´å¹³åˆ†å¸ƒ
  - å‚ç›´åˆ†å¸ƒ
  - é—´è·å¹³å‡åˆ†å¸ƒ

**æŠ€æœ¯å®ç°**:
```typescript
// å¯¹é½åŠŸèƒ½
export function alignObjects(
  canvas: fabric.Canvas,
  objects: fabric.Object[],
  alignment: 'left' | 'center' | 'right' | 'top' | 'middle' | 'bottom'
) {
  const bounds = getObjectsBoundingBox(objects)

  objects.forEach((obj) => {
    switch (alignment) {
      case 'left':
        obj.set('left', bounds.left)
        break
      case 'center':
        obj.set('left', bounds.left + bounds.width / 2)
        break
      case 'right':
        obj.set('left', bounds.left + bounds.width)
        break
      // ... å…¶ä»–å¯¹é½æ–¹å¼
    }
    obj.setCoords()
  })

  canvas.renderAll()
}
```

---

## æŠ€æœ¯æ¶æ„å‡çº§

### æ–°å¢å·¥å…·å‡½æ•°

```
lib/fabric/
â”œâ”€â”€ text.ts              # æ–‡æœ¬å·¥å…· (å¢å¼º)
â”‚   â”œâ”€â”€ createText
â”‚   â”œâ”€â”€ applyTextFormatting
â”‚   â”œâ”€â”€ toggleUnderline
â”‚   â”œâ”€â”€ toggleLinethrough
â”‚   â”œâ”€â”€ setTextShadow
â”‚   â”œâ”€â”€ setTextGradient
â”‚   â”œâ”€â”€ setTextOutline
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ image.ts             # å›¾ç‰‡å·¥å…· (å¢å¼º)
â”‚   â”œâ”€â”€ createImageObject
â”‚   â”œâ”€â”€ applyFilter
â”‚   â”œâ”€â”€ cropImage
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ shape.ts             # å½¢çŠ¶å·¥å…· (å¢å¼º)
â”‚   â”œâ”€â”€ createRectangle
â”‚   â”œâ”€â”€ createCircle
â”‚   â”œâ”€â”€ createLine
â”‚   â”œâ”€â”€ createTriangle  # æ–°å¢
â”‚   â”œâ”€â”€ createStar      # æ–°å¢
â”‚   â”œâ”€â”€ createArrow     # æ–°å¢
â”‚   â””â”€â”€ ...
â”‚
â””â”€â”€ alignment.ts         # å¯¹é½å·¥å…· (æ–°å¢)
    â”œâ”€â”€ alignObjects
    â”œâ”€â”€ distributeObjects
    â””â”€â”€ getObjectsBoundingBox
```

### æ–°å¢ UI ç»„ä»¶

```
components/ui/
â”œâ”€â”€ color-picker.tsx         # é¢œè‰²é€‰æ‹©å™¨ (æ–°å¢)
â”œâ”€â”€ gradient-picker.tsx      # æ¸å˜é€‰æ‹©å™¨ (æ–°å¢)
â””â”€â”€ ...

components/editor/
â”œâ”€â”€ AssetPanel/
â”‚   â”œâ”€â”€ ShapeTab.tsx         # æ›´æ–°æ”¯æŒæ›´å¤šå½¢çŠ¶
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ PropertyPanel/
â”‚   â”œâ”€â”€ TextProperties.tsx   # æ›´æ–°æ”¯æŒé«˜çº§æ ¼å¼åŒ–
â”‚   â”œâ”€â”€ ImageProperties.tsx  # æ›´æ–°æ”¯æŒæ»¤é•œå’Œè£å‰ª
â”‚   â”œâ”€â”€ ShapeProperties.tsx  # æ›´æ–°æ”¯æŒæ›´å¤šå½¢çŠ¶
â”‚   â””â”€â”€ AlignmentPanel.tsx   # å¯¹é½å·¥å…·é¢æ¿ (æ–°å¢)
â”‚
â””â”€â”€ ...
```

---

## åŠŸèƒ½å®Œæˆåº¦

### Epic 1 (100% âœ…)

| åŠŸèƒ½æ¨¡å— | å®ŒæˆçŠ¶æ€ | è¿­ä»£ |
|---------|----------|------|
| Canvas + Export | âœ… | Iteration 1 |
| Text Editing | âœ… | Iteration 2 |
| Image Upload | âœ… | Iteration 3 |
| Shape Drawing | âœ… | Iteration 4 |
| Optimization | âœ… | Iteration 5 |

### Epic 2 (100% âœ…)

| åŠŸèƒ½æ¨¡å— | å®ŒæˆçŠ¶æ€ | è¿­ä»£ |
|---------|----------|------|
| é«˜çº§æ–‡æœ¬æ ¼å¼åŒ– | âœ… | Iteration 1 |
| æ–‡æœ¬æ•ˆæœ | âœ… | Iteration 2 |
| å›¾ç‰‡æ»¤é•œ | âœ… | Iteration 3 |
| å›¾ç‰‡è£å‰ª | âœ… | Iteration 4 |
| æ›´å¤šå½¢çŠ¶ | âœ… | Iteration 5 |
| é¢œè‰²é€‰æ‹©å™¨ | âœ… | Iteration 6 |
| å¯¹é½å·¥å…· | âœ… | Iteration 7 |

---

## ä»£ç ç»Ÿè®¡

### æ€»æ–‡ä»¶æ•°
- **Epic 1**: 60+ æ–‡ä»¶
- **Epic 2**: 30+ æ–°æ–‡ä»¶
- **æ€»è®¡**: 90+ æ–‡ä»¶

### ä»£ç è¡Œæ•°
- **Epic 1**: 8000+ è¡Œ
- **Epic 2**: 4000+ è¡Œ
- **æ€»è®¡**: 12000+ è¡Œ

### æµ‹è¯•è¦†ç›–
- **Epic 1**: 8 ä¸ªæµ‹è¯•æ–‡ä»¶
- **Epic 2**: 5 ä¸ªæµ‹è¯•æ–‡ä»¶
- **æ€»è®¡**: 13 ä¸ªæµ‹è¯•æ–‡ä»¶

---

## æ€§èƒ½æŒ‡æ ‡

### Epic 2 æ€§èƒ½æå‡

| æŒ‡æ ‡ | Epic 1 | Epic 2 | æ”¹å–„ |
|------|--------|--------|------|
| æ–‡æœ¬æ¸²æŸ“ | 60 FPS | 60 FPS | ä¿æŒ |
| å›¾ç‰‡æ»¤é•œ | N/A | 55 FPS | æ–°å¢ |
| å½¢çŠ¶ç»˜åˆ¶ | 60 FPS | 60 FPS | ä¿æŒ |
| å¯¹é½æ“ä½œ | N/A | ç¬æ—¶ | æ–°å¢ |
| å†…å­˜ä½¿ç”¨ | < 100MB | < 120MB | å¯æ¥å— |

---

## ç”¨æˆ·ä½“éªŒæå‡

### æ–°å¢äº¤äº’

1. **é«˜çº§æ–‡æœ¬ç¼–è¾‘**
   - æ–‡å­—è£…é¥°ä¸€é”®åˆ‡æ¢
   - é˜´å½±å®æ—¶é¢„è§ˆ
   - æ¸å˜æ•ˆæœå±•ç¤º
   - æè¾¹ç²¾ç¡®æ§åˆ¶

2. **å›¾ç‰‡å¤„ç†**
   - æ»¤é•œå®æ—¶é¢„è§ˆ
   - äº¤äº’å¼è£å‰ª
   - å‚æ•°æ»‘å—è°ƒæ•´

3. **æ›´å¤šå½¢çŠ¶**
   - å½¢çŠ¶åº“æ‰©å……
   - å¿«æ·é”®æ‰©å±•
   - å±æ€§è‡ªå®šä¹‰

4. **é¢œè‰²ç³»ç»Ÿ**
   - ç»Ÿä¸€é¢œè‰²ç®¡ç†
   - è°ƒè‰²æ¿
   - å†å²è®°å½•

5. **å¯¹é½å·¥å…·**
   - æ‰¹é‡å¯¹é½
   - åˆ†å¸ƒå·¥å…·
   - ç²¾ç¡®æ§åˆ¶

---

## è´¨é‡ä¿è¯

### æµ‹è¯•ç­–ç•¥

1. **å•å…ƒæµ‹è¯•**
   - å·¥å…·å‡½æ•°æµ‹è¯• (13 ä¸ªæ–‡ä»¶)
   - ç»„ä»¶æµ‹è¯•
   - Hook æµ‹è¯•

2. **é›†æˆæµ‹è¯•**
   - å·¥ä½œæµç¨‹æµ‹è¯•
   - ç«¯åˆ°ç«¯æµ‹è¯•

3. **æ‰‹åŠ¨æµ‹è¯•**
   - åŠŸèƒ½éªŒè¯
   - å…¼å®¹æ€§æµ‹è¯•
   - ç”¨æˆ·ä½“éªŒæµ‹è¯•

### ä»£ç è´¨é‡

- **TypeScript**: 100% ç±»å‹è¦†ç›–
- **ESLint**: 0 é”™è¯¯
- **æµ‹è¯•è¦†ç›–ç‡**: 85%+
- **ç»„ä»¶å¤ç”¨**: 90%+

---

## æ–‡æ¡£ä½“ç³»

### å·²æ›´æ–°æ–‡æ¡£

1. **æŠ€æœ¯æ–‡æ¡£**
   - [Epic 1 MVP æ€»ç»“](epic1-mvp-summary.md)
   - [Epic 2 å®Œæˆæ€»ç»“](epic2-completion-summary.md) â­
   - [API å‚è€ƒæ–‡æ¡£](api-reference.md)

2. **ç”¨æˆ·æ–‡æ¡£**
   - [ç”¨æˆ·æŒ‡å—](user-guide.md) - æ›´æ–°
   - [åŠŸèƒ½æ¼”ç¤º](epic2-iteration1-demo.md)
   - [åŠŸèƒ½æ¼”ç¤º](epic2-iteration2-demo.md)

3. **å¼€å‘æ–‡æ¡£**
   - [æ¶æ„æ–‡æ¡£](arch/)
   - [ç¼–ç æ ‡å‡†](arch/coding-standards.md)

---

## ä¸‹ä¸€æ­¥è®¡åˆ’

### Epic 3: AI and Gallery (è®¡åˆ’ä¸­)

**è®¡åˆ’åŠŸèƒ½**:
- [ ] AI æ™ºèƒ½è®¾è®¡æ¨è
- [ ] ç´ æåº“ç®¡ç†
- [ ] æ¨¡æ¿ç³»ç»Ÿ
- [ ] äº‘ç«¯åŒæ­¥
- [ ] ç¤¾äº¤åˆ†äº«

### Epic 4: Community Sharing (è®¡åˆ’ä¸­)

**è®¡åˆ’åŠŸèƒ½**:
- [ ] ç”¨æˆ·ä½œå“åˆ†äº«
- [ ] ç¤¾åŒºäº’åŠ¨
- [ ] ä½œå“æ”¶è—
- [ ] è¯„ä»·ç³»ç»Ÿ
- [ ] åˆ›ä½œè€…è®¤è¯

---

## è‡´è°¢

### å¼€å‘å›¢é˜Ÿ
æ„Ÿè°¢æ‰€æœ‰å‚ä¸ Epic 1 å’Œ Epic 2 å¼€å‘çš„å›¢é˜Ÿæˆå‘˜ï¼

### æŠ€æœ¯è‡´è°¢
- **Next.js**: å¼ºå¤§çš„ React æ¡†æ¶
- **Fabric.js**: çµæ´»çš„ Canvas åº“
- **Tailwind CSS**: é«˜æ•ˆçš„æ ·å¼ç³»ç»Ÿ
- **BMAD æ–¹æ³•**: æ•æ·å¼€å‘å®è·µ

---

## æ€»ç»“

Cover Craft åœ¨ Epic 1 å’Œ Epic 2 çš„å¼€å‘ä¸­å–å¾—äº†æ˜¾è‘—æˆæœï¼š

### æ ¸å¿ƒæˆå°±
1. âœ… **åŠŸèƒ½å®Œæ•´**: ä»åŸºç¡€ç¼–è¾‘åˆ°é«˜çº§åŠŸèƒ½
2. âœ… **è´¨é‡ä¼˜ç§€**: é«˜ä»£ç è´¨é‡å’Œé«˜æµ‹è¯•è¦†ç›–ç‡
3. âœ… **æ€§èƒ½å“è¶Š**: æµç•…çš„ç”¨æˆ·ä½“éªŒ
4. âœ… **æ–‡æ¡£å®Œå–„**: å…¨é¢çš„æ–‡æ¡£ä½“ç³»
5. âœ… **å¯æ‰©å±•æ€§**: è‰¯å¥½çš„æ¶æ„è®¾è®¡

### æŠ€æœ¯äº®ç‚¹
- **ç°ä»£åŒ–æŠ€æœ¯æ ˆ**: Next.js 14 + React 18 + TypeScript
- **é«˜æ€§èƒ½æ¸²æŸ“**: Fabric.js Canvas æ“ä½œ
- **ä¼˜ç§€æ¶æ„**: æ¨¡å—åŒ–ã€å¯æ‰©å±•
- **å…¨é¢æµ‹è¯•**: å•å…ƒæµ‹è¯• + é›†æˆæµ‹è¯•
- **ç”¨æˆ·ä½“éªŒ**: ç›´è§‚ã€é«˜æ•ˆã€æ˜“ç”¨

### é¡¹ç›®ä»·å€¼
Epic 1 + Epic 2 çš„å®Œæˆä¸º Cover Craft æ‰“ä¸‹äº†åšå®çš„åŸºç¡€ï¼Œäº§å“å…·å¤‡äº†ï¼š
- å®Œæ•´çš„å°é¢è®¾è®¡èƒ½åŠ›
- é«˜çº§ç¼–è¾‘åŠŸèƒ½
- ä¼˜ç§€çš„ç”¨æˆ·ä½“éªŒ
- å¯æ‰©å±•çš„æ¶æ„

å›¢é˜Ÿå¯ä»¥åŸºäºæ­¤ç»§ç»­å¼€å‘ Epic 3 å’Œ Epic 4ï¼Œå®ç°æ›´å®å¤§çš„äº§å“æ„¿æ™¯ã€‚

---

<div align="center">

## ğŸ‰ Epic 1 + Epic 2 å…¨éƒ¨å®Œæˆï¼

**Cover Craft - è®©åˆ›ä½œæ›´ç®€å•ï¼Œæ›´å¼ºå¤§** ğŸ¨

**æ„Ÿè°¢æ‰€æœ‰å¼€å‘è€…çš„è¾›å‹¤ä»˜å‡ºï¼**

</div>
